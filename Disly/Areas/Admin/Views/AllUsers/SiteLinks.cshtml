@model SitesViewModel
@{
    Layout = null;
    var controller = "/" + @ViewBag.ControllerName + "/";
}

@using (Html.BeginForm())
{
    <div id="UpFrame" class="container">
        <div class="row">
            @if (ViewBag.SuccesAlert != null)
            {
                <div class="alert alert-success" role="alert">@ViewBag.SuccesAlert</div>
            }
            else if (@ViewBag.FailAlert != null)
            {
                <div class="alert alert-danger" role="alert">@ViewBag.FailAlert</div>
            }
            @Html.ValidationSummary(false, "", new { @class = "alert alert-danger" })
                        
            <div class="col-xs-10">
                @Html.DropDownListFor(m => m.Site.C_Domain, new SelectList(Model.AllSiteList, "C_Domain", "C_Name", 0), new { @class = "uc_input", @title = "Список всех сайтов" })
                @*<input id="SiteId" type="hidden" value = @Model.Domain.SiteId />
                <input id="Id" type="hidden" value = @Model.Domain.Id />*@
                @Html.HiddenFor(m => m.User.Id, new { @value = @Model.User.Id })
            </div>
            <div class="col-xs-2">
                <div id="Buttons" class="ButtonsFrame">
                    <button type="submit" name="action" value="create-btn-group" class="BtnCreate">Добавить</button>
                </div>
            </div>
        </div>

        @if (Model.SiteList != null)
        {
            <table class="sitelinks table table-striped">
                @foreach(SitesModel site in Model.SiteList)
                {
                    <tr>
                        <td>@site.C_Name <span>(@site.C_Domain)</span></td>
                        <td><span class="delete-sitelink icon-icon-trash-2" data-delete-site="@site.C_Domain" data-delete-user="@Model.User.Id"></span></td>
                    </tr>
                }
            </table>
        }
    </div>
}

@Styles.Render("~/bundles/popUp_css")
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/popUp_js")