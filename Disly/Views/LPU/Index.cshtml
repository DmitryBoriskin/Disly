@model LPUViewModel
@{
    if (Model.SitesInfo.Alias == "main")
    {
        Layout = "/views/_portal/shared/_layout.cshtml";
    }
}
@{
    string title = ViewBag.TypeTitle;
}
<div class="type-page">
    <div class="container">
        @Html.Partial("services/breadcrumbs")

        <h1>@ViewBag.Title</h1>

        @Html.Partial("Nav")

        @if (Model.OrgTypes != null)
        {
            <div class="row">
                @foreach (var item in Model.OrgTypes)
                {
                    string link = "/lpu?t=typelist&id=" + item.Id;
                    <div class="col-md-6">
                        <a href="@link">@item.Title</a>
                    </div>
                }
            </div>
        }
        @if (Model.DepartmentAffiliations != null)
        {
            <div class="row">
                @foreach (var item in Model.DepartmentAffiliations)
                {
                    string link = "/lpu?t=affiliation&id=" + item.Key;
                    <div class="col-md-6">
                        <a href="@link">@item.Value</a>
                    </div>
                }
            </div>
        }

        @if (Model.MedicalServices != null)
        {
            <div class="row">
                @foreach (var item in Model.MedicalServices)
                {
                    string link = "/lpu?t=services&id=" + item.Id;
                    <div class="col-md-6">
                        <a href="@link">@item.Title</a>
                    </div>
                }
            </div>
        }

        @if (Model.OrgList != null)
        {
            if (!string.IsNullOrWhiteSpace(title))
            {
                <h2>@title</h2>
            }

            <div class="row">
                <div class="col-md-12">
                    @foreach (var item in Model.OrgList)
                    {
                        string logoImg = (!string.IsNullOrWhiteSpace(item.Logo))
                          ? File.Exists(Server.MapPath(item.Logo))
                              ? item.Logo : "/Content/img/nophoto.jpg"
                          : "/Content/img/nophoto.jpg";

                        <div class="row org_item">
                            <div class="col-md-1">
                                <img src="@logoImg" alt="@item.Title" />
                            </div>

                            <div class="col-md-9">
                                @if (!string.IsNullOrWhiteSpace(item.Title))
                                {
                                    <div>
                                        <h4>
                                            @if (!string.IsNullOrWhiteSpace(item.Link))
                                            {
                                                string link = "http://" + item.Link + ".med.cap.ru";
                                                <strong>
                                                    <a target="_blank" href="@link">@item.Title</a>
                                                </strong>
                                            }
                                            else
                                            {
                                                <strong>@item.Title</strong>
                                            }
                                        </h4>
                                    </div>
                                }
                                @if (!string.IsNullOrWhiteSpace(item.Address))
                                {
                                    <div>
                                        <strong>Адрес: </strong>@item.Address
                                    </div>
                                }
                                @if (!string.IsNullOrWhiteSpace(item.Phone))
                                {
                                    <div>
                                        <strong>Телефон: </strong>@item.Phone
                                    </div>
                                }
                                @if (!string.IsNullOrWhiteSpace(item.Fax))
                                {
                                    <div>
                                        <strong>Факс: </strong>@item.Fax
                                    </div>
                                }
                                @if (!string.IsNullOrWhiteSpace(item.PhoneReception))
                                {
                                    <div>
                                        <strong>Телефон регистратуры: </strong>@item.PhoneReception
                                    </div>
                                }
                                @if (!string.IsNullOrWhiteSpace(item.Email))
                                {
                                    <div>
                                        <strong>E-mail: </strong><a href="mailto:@item.Email">@item.Email</a>
                                    </div>
                                }
                            </div>
                            <div class="col-md-2">
                                @if (item.Leader != null && item.Leader.id != Guid.Empty)
                                {
                                    string photo = (item.Leader.Photo != null && !string.IsNullOrWhiteSpace(item.Leader.Photo.Url))
                                          ? File.Exists(Server.MapPath(item.Leader.Photo.Url))
                                              ? item.Leader.Photo.Url : "/Content/img/nophoto.jpg"
                                          : "/Content/img/nophoto.jpg";

                                    <img class="img-circle img-person-list" src="@photo" alt="@item.Leader.Surname" />
                                    <div class="org_item_post">@item.Leader.Post</div>
                                    <a target="_blank" href="/doctors/@item.Leader.id">@item.Leader.Surname @item.Leader.Name @item.Leader.Patronymic</a>
                                }
                            </div>
                        </div>
                    }
                </div>
            </div>
        }
    </div>
</div>
