@model SitesViewModel
@{
    FilterViewModel model = ViewBag.Filter;
}

@using (Html.BeginForm())
{
    if (Model.UserResolution.Read)
    {
        <div id="Buttons">
            @if (Model.UserResolution.Write)
            {                
                @Html.ActionLink("Создать", "create", new { area = "Admin", controller = "Sites", id = @Guid.NewGuid() }, new { @class = "Button BtnCreate" })
            }

        </div>

        <div id="Content">
            <div id="TitleBlock">@ViewBag.Title</div>
            @if (Model.SiteList != null)
            {
                foreach (SitesModel Item in Model.SiteList)
                {
                    <div class="ListItem User">
                        @*<a href="/Sites/edit/@Item.Id/">@Item.C_Name</a>*@
                        @Html.ActionLink(@Item.C_Name, "edit", new { area = "Admin", controller = "Sites", id = @Item.Id })
                        <div>
                            <a target="_blank" href="http://@(Item.C_Domain+"."+ Settings.BaseURL)/">Показать сайт</a>
                            <a href="http://@(Item.C_Domain+"."+ Settings.BaseURL)/Admin/">CMS Сайта</a>
                        </div>
                    </div>
                }
            }
            else
            {
                <p>Список сайтов пуст.</p>
            }
        </div>

        <div id="DopInfo">
            <div class="DopCaption">Фильтр</div>
            @Html.Partial("Partial/Filter", model)
            @Html.TextBoxFor(m => Model.SearchLine, new { @class = "uc_input", @placeholder = "Поиск", @MaxLength = "512", @data_help = "Поиск по названию организации." })
            <button type="submit" class="btn btn-primary">Найти</button>

            @*@Html.Partial("Partial/Filter")*@
        </div>
    }
    else
    {
        <div id="Content"><p>У вас недостаточно прав.</p></div>
    }

}