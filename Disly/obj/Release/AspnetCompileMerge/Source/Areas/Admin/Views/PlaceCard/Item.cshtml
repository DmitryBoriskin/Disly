@model PlaceCardViewModel

@Html.Partial("Partial/Confirm")
@Html.Partial("Partial/Frame")
@using (Html.BeginForm())
{
    <div id="Buttons">
        @if (ViewBag.ActionName == "create")
        {
            if (Model.UserResolution.Change)
            {
                <button type="submit" name="action" value="create-btn" class="BtnCreate">Сохранить</button>
            }
            <button type="submit" name="action" value="cancel-btn" class="BtnCancel">Закрыть</button>
        }
        else
        {
            if (Model.UserResolution.Change)
            {
                <button type="submit" name="action" value="update-btn" class="BtnSave">Сохранить</button>
            }
            <button type="submit" name="action" value="cancel-btn" class="BtnCancel">Закрыть</button>
            if (Model.UserResolution.Delete)
            {
                <button type="submit" name="action" value="delete-btn" class="BtnDelete">Удалить</button>
            }

        }
    </div>
    if (Model.UserResolution.Read)
    {
        <div id="Content">
            <div id="TitleBlock">@ViewBag.Title</div>
            @Html.ValidationSummary(false, "", new { @class = "alert alert-danger" })
            
            @Html.TextBoxFor(m => m.Item.Title, new { @class = "uc_input", @title = "Название" })
            @Html.TextBoxFor(m => m.Item.Alias, new { @class = "uc_input", @title = "Алиас" })
            @Html.TextBoxFor(m => m.Item.Place, new { @class = "uc_input", @title = "Место проведения" })
            @Html.TextBoxFor(m => m.Item.UrlName, new { @class = "uc_input", @title = "Название источника" })
            @Html.TextBoxFor(m => m.Item.Url, new { @class = "uc_input", @title = "Ссылка на источник" })
            @Html.TextAreaFor(m => m.Item.Text, new { @class = "uc_input", @title = "Текст", @type = "editor", @height = "300" })
        </div>
        <div id="DopInfo">
            <div class="GroupBlock Open" title="Начало события">
                @Html.TextBoxFor(m => m.Item.DateStart, new { @class = "uc_input", @type = "date", @title = "Дата начала", @Value = ViewBag.DateStart })
                @Html.TextBoxFor(m => m.Item.TimeStart, new { @class = "uc_input", @type = "time", @title = "Время начала", @Value = ViewBag.TimeStart })
            </div>
            <div class="GroupBlock Open" title="Окончание события">
                @Html.TextBoxFor(m => m.Item.DateEnd, new { @class = "uc_input", @type = "date", @title = "Дата окончания", @Value = ViewBag.DateEnd })
                @Html.TextBoxFor(m => m.Item.TimeEnd, new { @class = "uc_input", @type = "time", @title = "Время окончания", @Value = ViewBag.TimeEnd })
            </div>
                @*<div class="row">
                    <div class="col-xs-7">
                    </div>
                    <div class="col-xs-5">
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-7">
                    </div>
                    <div class="col-xs-5">
                    </div>
                </div>*@

            <div class="GroupBlock Open" title="Мета теги">
                @Html.TextAreaFor(m => m.Item.Keyw, new { @class = "uc_input", @title = "Ключевые слова", @data_help = "Данный тег используется при создании краткого описания страницы, используется поисковыми системами для индексации, а также при создании аннотации в выдаче по запросу. При отсутствии тега поисковые системы выдают в аннотации первую строку документа или отрывок, содержащий ключевые слова." })
                @Html.TextAreaFor(m => m.Item.Desc, new { @class = "uc_input", @title = "Краткое описание", @data_help = "Данный метатег поисковые системы используют для того, чтобы определить релевантность ссылки. При формировании данного тега необходимо использовать только те слова, которые содержатся в самом документе. Использование тех слов, которых нет на странице, не рекомендуется. Рекомендованное количество слов в данном теге — не более десяти." })
            </div>
            @Html.CheckBoxFor(m => m.Item.Disabled, new { @class = "uc_input", @title = "Запретить просмотр" })
            
            @if (Model.Item != null)
            {
                @Html.ActionLink("Журнал изменений", "log", "services", new { @id = Model.Item.id }, new { @id = "LogLists", @class = "Button PopUpFrame icon-archive", @data_class = "LogList" })
            }    
        </div>

    }
    else {
        <div id="Content"><p>У Вас недостаточно прав.</p></div>
    }

    if (ViewBag.Message != null)
    {
        @Html.Partial("Partial/modal")
    }
}